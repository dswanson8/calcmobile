  <!doctype html>
  <html lang="en">
  <head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Multi‑Line Calculator</title>
  <link rel="manifest" href="manifest.webmanifest">
  <meta name="theme-color" content="#111827">
  <link rel="apple-touch-icon" href="icons/icon-192.png">
  <style>
    :root { --bg:#0b1220; --card:#111827; --ink:#e5e7eb; --muted:#9ca3af; --accent:#38bdf8; }
    * { box-sizing: border-box; }
    html, body { height: 100%; margin: 0; }
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; background: var(--bg); color: var(--ink); display: grid; place-items: center; }
    .app { width: min(720px, 100%); padding: 16px; }
    .card { background: var(--card); border-radius: 16px; box-shadow: 0 10px 30px rgba(0,0,0,.3); overflow: hidden; }
    header { padding: 16px 20px; display:flex; align-items:center; justify-content:space-between; border-bottom: 1px solid rgba(255,255,255,.06); }
    header h1 { font-size: 18px; margin: 0; letter-spacing: .3px; font-weight: 600; }
    header .pill { font-size: 12px; color: var(--muted); }
    #history { max-height: min(60vh, 520px); overflow: auto; padding: 8px 20px 0 20px; }
    .row { padding: 10px 0; border-bottom: 1px dashed rgba(255,255,255,.06); }
    .expr { color: var(--muted); font-size: 14px; line-height: 1.4; word-wrap: break-word; }
    .result { font-size: 20px; margin-top: 6px; display:flex; align-items:center; gap:8px; }
    .clickable { cursor: pointer; border-bottom: 1px dotted rgba(56,189,248,.6); }
    .clickable:hover { color: var(--accent); }
    .toolbar { display:flex; gap:8px; padding: 10px 20px; }
    .toolbar button { background:#0f172a; border:1px solid rgba(255,255,255,.08); color:var(--ink); padding:10px 12px; border-radius:10px; font-size:14px; cursor:pointer; }
    .toolbar button:hover{ border-color: rgba(56,189,248,.6); }
    .input { display:flex; gap:10px; align-items:center; padding: 14px 20px 20px; }
    #line { flex:1; background:#0f172a; border:1px solid rgba(255,255,255,.08); color:var(--ink); padding:12px 14px; border-radius:10px; font-size:18px; outline: none; }
    #line::placeholder { color: #64748b; }
    #enter { padding:12px 16px; font-size:16px; }
    .hint { color: var(--muted); font-size: 12px; padding: 0 20px 16px; }
    .badge { padding:2px 8px; border-radius:999px; background:rgba(56,189,248,.15); color: var(--accent); font-size:12px; }
    .empty { color: var(--muted); padding: 16px 20px; }
  </style>
  </head>
  <body>
  <div class="app">
    <div class="card">
      <header>
        <h1>Multi‑Line Calculator</h1>
        <span class="pill">Offline‑ready</span>
      </header>
      <div id="history" aria-live="polite"></div>
      <div class="hint">Tip: Press <span class="badge">Enter</span> to evaluate • Click any <strong>number</strong> in history to insert it at the cursor.</div>
      <div class="toolbar">
        <button id="btn-clear">Clear history</button>
        <button id="btn-copy-last">Copy last result</button>
        <span class="hint" id="status"></span>
      </div>
      <!-- existing input block -->
  <div class="input">
  <!-- make readonly on touch via JS; leave as normal on desktop -->
  <input id="line" type="text" autocomplete="off"
         autocapitalize="off" autocorrect="off" spellcheck="false"
         placeholder="Type or tap…" />
  <button id="enter">=</button>
  </div>
  
  <!-- VIRTUAL KEYPAD -->
  <div class="numpad" aria-label="Calculator keypad">
  <button class="key" data-key="NumLock" aria-label="Num Lock">Num<br>Lock</button>
  <button class="key" data-key="/">/</button>
  <button class="key" data-key="*">*</button>
  <button class="key tall plus" data-key="+">+</button>
  
  <button class="key" data-key="7">7<br><small>Home</small></button>
  <button class="key" data-key="8">8<br><small>↑</small></button>
  <button class="key" data-key="9">9<br><small>Pg Up</small></button>
  
  <button class="key" data-key="4">4<br><small>End</small></button>
  <button class="key" data-key="5">5<br><small>•</small></button>
  <button class="key" data-key="6">6<br><small>→</small></button>
  <button class="key tall enter" data-key="Enter">Enter</button>
  
  <button class="key" data-key="1">1<br><small>←</small></button>
  <button class="key" data-key="2">2<br><small>↓</small></button>
  <button class="key" data-key="3">3<br><small>Pg Dn</small></button>
  
  <button class="key wide" data-key="0">0<br><small>Ins</small></button>
  <button class="key" data-key=".">.<br><small>Del</small></button>
  <button class="key" data-key="-">−</button>
  </div>
  
    </div>
    <p class="hint" style="margin-top:10px">Supported: + − × ÷ ^ % (parentheses), constants <code>pi</code>, <code>e</code>, and functions <code>sqrt</code>, <code>sin</code>, <code>cos</code>, <code>tan</code>, <code>log</code> (base10), <code>ln</code>. Percent works like <code>50%</code> → 0.5.</p>
  </div>
  <script src="app.js"></script>
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('./service-worker.js').catch(()=>{});
      });
    }
  </script>
  </body>
  </html>
  
  
